---
title: 'Sourcegraph 3.39 release'
publishDate: 2022-04-21T10:00-07:00
description: 'Sourcegraph 3.39 introduces...'
tags: [blog, release]
slug: 'release/3.39'
published: true
heroImage: https://storage.googleapis.com/sourcegraph-assets/blog/3.38/sourcegraph-3-39-release.png
socialImage: https://storage.googleapis.com/sourcegraph-assets/blog/3.38/sourcegraph-3-39-release.png
changelogItems:
# 3.39.0
# Added
  - description: Added support for LSIF upload authentication against GitLab.com on Sourcegraph Cloud.
    url: https://github.com/sourcegraph/sourcegraph/pull/33254
    category:
  - description: "Add \"getting started/quick start checklist for authenticated users\""
    url: https://github.com/sourcegraph/sourcegraph/pull/32882
    category:
  - description: "A redesigned repository page is now available under the `new-repo-page` feature flag."
    url: https://github.com/sourcegraph/sourcegraph/pull/33319
    category: Repositories
  - description: Notebooks are now enabled by default.
    url: https://github.com/sourcegraph/sourcegraph/pull/33706
    category:
  - description: "The Code Insights GraphQL API now accepts Search Contexts as a filter and will extract the expressions embedded the `repo` and `-repo` search query fields from the contexts to apply them as filters on the insight."
    url: https://github.com/sourcegraph/sourcegraph/pull/33866
    category: Search
  - description: "The Code Insights commit indexer can now index commits in smaller batches. Set the number of days per batch in the site setting `insights.commit.indexer.windowDuration`. A value of 0 (default) will disable batching."
    url: https://github.com/sourcegraph/sourcegraph/pull/33666
    category: Batch Changes
  - description: "Support account lockout after consecutive failed sign-in attempts for builtin authentication provider (i.e. username and password), new config options are added to the site configuration under `\"auth.lockout\"` to customize the threshold, length of lockout and consecutive periods."
    url: https://github.com/sourcegraph/sourcegraph/pull/33999
    category: Admin
  - description: "pgsql-exporter for Code Insights has been added to docker-compose and Kubernetes deployments to gather database-level metrics. [#780](https://github.com/sourcegraph/deploy-sourcegraph-docker/pull/780),"
    url: "https://github.com/sourcegraph/deploy-sourcegraph/pull/4111"
    category:
  - description: "`repo:dependencies(...)` predicate can now search through the [Go dependencies of your repositories](https://docs.sourcegraph.com/code_search/how-to/dependencies_search)."
    url: https://github.com/sourcegraph/sourcegraph/issues/32658
    category: Search
# Changed
  - description: "Code Insights: Series data is now sorted by semantic version then alphabetically."
    url:
    category:
  - description: "Code Insights: Added locked insights overlays for frozen insights while in limited access mode. Restricted insight editing save change button for frozen insights."
    url: https://github.com/sourcegraph/sourcegraph/pull/33062
    category:
  - description: "Code Insights: A global dashboard will now be automatically created while in limited access mode to provide consistent visibility for unlocked insights. This dashboard cannot be deleted or modified while in limited access mode."
    url: https://github.com/sourcegraph/sourcegraph/pull/32992
    category:
  - description: "Update \"getting started checklist for visitors\" to a new design [TODO:]"
    url:
    category:
  - description: "Update \"getting started/quick start checklist for visitors\" to a new design"
    url: https://github.com/sourcegraph/sourcegraph/pull/32882
    category:
  - description: "Code Insights: Capture group values are now restricted to 100 characters."
    url: https://github.com/sourcegraph/sourcegraph/pull/32828
    category:
  - description: "Repositories for which gitserver's janitor job \"sg maintenance\" fails will eventually be re-cloned if \"DisableAutoGitUpdates\" is set to false (default) in site configuration."
    url: https://github.com/sourcegraph/sourcegraph/pull/33432
    category: Repositories
  - description: The Code Insights database is now based on Postgres 12, removing the dependency on TimescaleDB.
    url: https://github.com/sourcegraph/sourcegraph/pull/32697
    category:
# Fixed
  - description: Fixed create insight button being erroneously disabled.
    url:
    category:
  - description: "Fixed an issue where a `Warning: Sourcegraph cannot send emails!` banner would appear for all users instead of just site admins (introduced in v3.38)."
    url:
    category: Admin
  - description: Fixed reading search pattern type from settings
    url: https://github.com/sourcegraph/sourcegraph/issues/32989
    category: Search
  - description: Display a tooltip and truncate the title of a search result when content overflows
    url: https://github.com/sourcegraph/sourcegraph/pull/32904
    category: Search
  - description: "Search patterns containing `and` and `not` expressions are now optimized to evaluate natively on the Zoekt backend for indexed code content and symbol search wherever possible. These kinds of queries are now typically an order of magnitude faster. Previous cases where no results were returned for expensive search expressions should now work and return results quickly."
    url: https://github.com/sourcegraph/sourcegraph/pull/33308
    category: Search
  - description: "Fail to log extension activation event will no longer block extension from activating [#33300][https://github.com/sourcegraph/sourcegraph/pull/33300]"
    url:
    category:
  - description: "Fixed out-ouf-memory events for gitserver's janitor job \"sg maintenance\"."
    url: https://github.com/sourcegraph/sourcegraph/issues/33353
    category:
  - description: Setting the publication state for changesets when previewing a batch spec now works correctly if all changesets are selected and there is more than one page of changesets.
    url: https://github.com/sourcegraph/sourcegraph/issues/33619
    category: Batch Changes
# Removed
---

Sourcegraph 3.39 is now available! In this release:

## Onboard developers fast with Notebooks, now Generally Available

Built with onboarding in mind, Notebooks make documentation effortless, stable, and fun. Inspired by the Jupyter Notebooks project and featuring four unique block types, an intelligent notepad for creating notebooks on the fly, and deep integration with Sourcegraph's code search so you can always find the code you need.

!["Notebooks overview"](https://storage.googleapis.com/sourcegraph-assets/notebooks/notebooks_overview_release_post.mp4)

Web-based notebooks are the easiest way to create and share notebooks with your team or company, but we also support file-based notebooks via a special `.snb.md` file type. With file-based Notebooks, you can augment existing documentation and meet where your developers where they already are. You can also embed notebooks on any web page, enabling easy integration with your knowledge management systems.

Explore [public notebooks on sourcegraph.com](https://sourcegraph.com/notebooks?tab=explore) (no account required to view; create a free account to build your own) or get started creating your own at `https://{your-sourcegraph-url}/notebooks`!

To learn all about Notebooks, [read the docs](https://docs.sourcegraph.com/notebooks)!

## Code Insights is no longer backed by Timescale

Code Insights can now be used with managed database solutions that do not support [Timescale](https://www.timescale.com/), like Amazon RDS. It now uses native Postgres.

This migration has been applied over 3.37 and 3.38, and should be seamless if you are running infrastructure as described by the [official Sourcegraph deployment repositories](https://sourcegraph.com/search?q=context:%40sourcegraph/all+repo:%5Egithub%5C.com/sourcegraph/deploy-sourcegraph+select:repo&patternType=literal). If you have a customized deployment, you may need to incorporate some changes into your configuration ([more details and examples here](https://github.com/sourcegraph/sourcegraph/issues/32271#issuecomment-1086328666)).

Any managed database solution that supports the [official Sourcegraph Postgres version requirements](https://docs.sourcegraph.com/admin/postgres#version-requirements) is now suitable for Code Insights. Migration from a self-hosted database is not performed automatically, and will need to be performed by a Sourcegraph admin at your own discretion.

## Local navigation for Java code is now faster and more accurate

We've added tree-sitter to our search-based Code Intelligence to make our local navigation for Java faster and more precise.

<video class="blog-image" title="Java code Intelligence" alt="An example of using Java Code Intelligence within the sourcegraph/sourcegraph repo." loop autoplay muted playsinline>
  <source src="https://user-images.githubusercontent.com/1657213/163855878-4355bcb0-5407-4307-b3f2-4581e1ab2fe2.mp4">
</video>

## Search your Go dependenices

[Dependencies search](https://docs.sourcegraph.com/code_search/how-to/dependencies_search) allows you to quickly search through your repository dependencies for faster incident and vulnerability resolution. Dependencies search now supports Go dependencies in addition to NPM.
