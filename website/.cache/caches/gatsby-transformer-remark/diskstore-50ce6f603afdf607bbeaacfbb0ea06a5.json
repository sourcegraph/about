{"expireTime":9007200905229171000,"key":"transformer-remark-markdown-html-e9b434749e76c7c01d7427a05120f5a5-gatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-unwrap-imagesgatsby-remark-imagesgatsby-remark-smartypants-","val":"<p>In this post, we’ll explain how Sourcegraph code search can be used to report on the progress of upgrading CircleCI config files to the 2.0 format.</p>\n<p>CircleCI 2.0 officially came out of beta in July 2017, introducing a versioned config file (<code class=\"language-text\">.circleci/config.yml</code>) to replace the previous <code class=\"language-text\">circle.yml</code> file. A likely scenario could be an Engineering Manager requesting all teams upgrade to CircleCI 2.0 and wanting to track progress without human intervention.</p>\n<p>Using <a href=\"https://sourcegraph.com/\">Sourcegraph.com</a> and as an example, <a href=\"https://github.com/segmentio\">Segment’s open source code on GitHub</a>, let’s search for repositories that contain the 1.0 <code class=\"language-text\">circle.yml</code> file:</p>\n<div class=\"text-center\" style=\"margin-bottom: -1rem\">\n<p>  Query: <a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\"><code class=\"language-text\">repo:/segmentio/ file:circle.yml</code></a>.</p>\n</div>\n<a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n  <img src=\"https://about.sourcegraph.com/blog/circleci-results.png\" alt=\"CircleCi results\">\n</a>\n<p style=\"margin-top:2rem\">\n  Typing this query every time would be inefficient, so let's save this query as a saved search.\n  <img src=\"https://about.sourcegraph.com/blog/circleci-create-saved-search.png\" alt=\"CicleCi create saved search\">\n</p>\n<p style=\"margin-top:2rem\">\n  Then we can access it with a single click.\n  <img src=\"https://about.sourcegraph.com/blog/circleci-access-saved-search.png\" alt=\"CicleCi access saved search\">\n</p>\n<!--\nTODO(ryan): Needs type:diff <p style=\"margin-top:2rem\">\n  We can take this a step further by opting to receive a notification when the number of results for <code>circle.yml</code> files change:\n  <img src=\"https://about.sourcegraph.com//blog/circleci-saved-search-notification.png\" />\n</p> -->\n<h2 id=\"Bonus-queries\" style=\"position:relative;\"><a href=\"#Bonus-queries\" aria-label=\"Bonus queries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 18 95 120\" height=\"18\" width=\"18\"><path d=\"M53.69,78.7H37.94l-5.85,25H21.74l5.85-25H15.89L18,69.1H29.84l4.65-19.65H23.39l2.1-9.6H36.74l5.7-23.7H52.79l-5.7,23.7H62.84l5.7-23.7H78.89l-5.7,23.7H84.74l-2.4,9.6H70.94L66.29,69.1H77.24l-2.4,9.6H64l-5.85,25H47.84Zm-13.5-9.6H55.94l4.65-19.65H44.84Z\"/></svg></a>Bonus queries</h2>\n<p>If we wanted to find which repositories <strong>have</strong> been upgraded.</p>\n<div class=\"text-center\" style=\"margin-bottom: -1rem\">\n<p>Query: <a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:%5C.circleci/config%5C.yml\"><code class=\"language-text\">repo:/segmentio/ file:\\.circleci/config\\.yml</code></a>.</p>\n</div>\n<div class=\"text-center\">\n  <a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n    <img src=\"https://about.sourcegraph.com/blog/circleci-results.png\" alt=\"CircleCi results\">\n  </a>\n</div>\n<p style=\"margin-top:2rem\">\n  Using Sourcegraph's diff search (<code>type: diff</code>), we can find who made the commit that contained the upgrade.\n</p>\n<div class=\"text-center\" style=\"margin-bottom: -1rem\">\n<p>  Query: <a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:%5C.circleci/config%5C.yml+type:diff+%22version:+2%22\"><code class=\"language-text\">repo:/segmentio/ file:\\.circleci/config\\.yml type:diff &quot;version: 2&quot;</code></a>.</p>\n</div>\n<a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n  <img src=\"https://about.sourcegraph.com/blog/circleci-who-upgraded.png\" alt=\"CicleCi who upgraded\">\n</a>\n<h2 id=\"Find-answers-in-code-with-Sourcegraph\" style=\"position:relative;\"><a href=\"#Find-answers-in-code-with-Sourcegraph\" aria-label=\"Find answers in code with Sourcegraph permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 18 95 120\" height=\"18\" width=\"18\"><path d=\"M53.69,78.7H37.94l-5.85,25H21.74l5.85-25H15.89L18,69.1H29.84l4.65-19.65H23.39l2.1-9.6H36.74l5.7-23.7H52.79l-5.7,23.7H62.84l5.7-23.7H78.89l-5.7,23.7H84.74l-2.4,9.6H70.94L66.29,69.1H77.24l-2.4,9.6H64l-5.85,25H47.84Zm-13.5-9.6H55.94l4.65-19.65H44.84Z\"/></svg></a>Find answers in code with Sourcegraph</h2>\n<p>Sourcegraph helps you find answers in code, supporting 10,000+ repositories and thousands of developers.</p>\n<p>Although this example was specific to CircleCI config files, the concepts apply equally well for many other similar use cases, such as tracking the removal of a deprecated Node.js package.</p>\n<style>\n  .blog-post__body img { border: none; }\n  .blog-post__body code { font-size: 0.9rem; }\n</style>"}