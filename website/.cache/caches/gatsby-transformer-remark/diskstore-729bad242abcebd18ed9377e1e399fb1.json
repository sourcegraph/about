{"expireTime":9007200905229171000,"key":"transformer-remark-markdown-html-1b88047fbe737ef9f41ec318307d6286-gatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-unwrap-imagesgatsby-remark-imagesgatsby-remark-smartypants-","val":"<style>\n  p {\n    overflow:scroll\n  }\n</style>\n<h1 id=\"Install-Sourcegraph-to-get-great-code-search-on-AWS-CodeCommit\" style=\"position:relative;\"><a href=\"#Install-Sourcegraph-to-get-great-code-search-on-AWS-CodeCommit\" aria-label=\"Install Sourcegraph to get great code search on AWS CodeCommit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 18 95 120\" height=\"18\" width=\"18\"><path d=\"M53.69,78.7H37.94l-5.85,25H21.74l5.85-25H15.89L18,69.1H29.84l4.65-19.65H23.39l2.1-9.6H36.74l5.7-23.7H52.79l-5.7,23.7H62.84l5.7-23.7H78.89l-5.7,23.7H84.74l-2.4,9.6H70.94L66.29,69.1H77.24l-2.4,9.6H64l-5.85,25H47.84Zm-13.5-9.6H55.94l4.65-19.65H44.84Z\"/></svg></a>Install Sourcegraph to get great code search on AWS CodeCommit</h1>\n<p>Sourcegraph brings great code search and understanding abilities to development teams using <a href=\"https://aws.amazon.com/codecommit/\">AWS CodeCommit</a>. Code search helps your engineering team find usage examples, debug errors, reuse existing libraries and packages, and understand unfamiliar parts of your code base more quickly. Learn more about <a href=\"https://docs.sourcegraph.com/code_search\">Sourcegraph code search</a>.</p>\n<p>Setting up Sourcegraph code search to work with AWS CodeCommit is quick and easy.</p>\n<ol>\n<li>First, <a href=\"https://docs.sourcegraph.com/admin\">install and run an instance of Sourcegraph</a>.</li>\n<li>Create a AWS IAM user with programmatic access.</li>\n</ol>\n <img alt=\"CodeCommit-CreateUser\" src=\"//images.contentful.com/le3mxztn6yoo/750VgGMn84q6ciwoOKiGMi/a6007e31880c976df94f9ecde68dcf1a/CodeCommit-CreateUser.png\" class=\"ba pa1 b--light-7 br2\" />\n<ol start=\"3\">\n<li>Attach the permission <code class=\"language-text\">AWSCodeCommitReadOnly</code> to this user.</li>\n</ol>\n  <img alt=\"CodeCommit-Permissions\" src=\"//images.contentful.com/le3mxztn6yoo/2vZ3AXk9Mc2MOGMIseQemg/e319cfd46a79fdf9237503f57e6c67c8/CodeCommit-Permissions.png\" class=\"ba pa1 b--light-7 br2\"/>\n<ol start=\"4\">\n<li>Create a SSH key pair:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ssh-keygen -t rsa</code></pre></div>\n<ol start=\"5\">\n<li>Add the public key to the IAM user (under the “Security credentials” tab). After it is uploaded, make a note of its <strong>SSH key ID</strong>.</li>\n</ol>\n <img alt=\"CodeCommit-PublicKey\" src=\"//images.contentful.com/le3mxztn6yoo/37bSN5FztCU6IAIMSiqYgQ/ccd769ca77041b11b8daef49cba42da0/CodeCommit-PublicKey.png\" class=\"ba pa1 b--light-7 br2\" />\n<ol start=\"6\">\n<li>Modify your <code class=\"language-text\">config.json</code> (which you created as part of installing Sourcegraph) to access your AWS CodeCommit repositories. You’ll need to make two changes:</li>\n</ol>\n<p> a. Set the <code class=\"language-text\">gitOriginMap</code> field to include a mapping of the form <code class=\"language-text\">aws/!ssh://${YOUR_SSH_KEY_ID}@${YOUR_SSH_CLONE_URL_PREFIX}/%</code>. Substitute the SSH key ID associated with the SSH key you added and the SSH clone URL prefix, which you can obtain by viewing the SSH clone URL of any of your repositories. It should look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;gitOriginMap&quot;: &quot;aws/!ssh://XXXXXXXXXXXXXXXXXXXX@git-codecommit.us-west-1.amazonaws.com/v1/repos/%&quot;,</code></pre></div>\n<p> b. Copy the private SSH key to a file called <code class=\"language-text\">id_rsa</code> in the directory that contains your <code class=\"language-text\">config.json</code>. Then add the following entry:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;gitserverSSH&quot;: {\n  &quot;id_rsa&quot;: &quot;file!id_rsa&quot;\n},</code></pre></div>\n<ol start=\"7\">\n<li>Update your Sourcegraph instance to reflect the changes you made to your <code class=\"language-text\">config.json</code> by running <code class=\"language-text\">sourcegraph-server-gen config.json ./helm-chart &amp;&amp; helm upgrade sourcegraph ./helm-chart</code>.<br/></li>\n<li>Add your AWS CodeCommit repositories by navigating to <code class=\"language-text\">https://${YOUR_SOURCEGRAPH_URL}/aws/${REPO_NAME}</code>.</li>\n</ol>\n<p>And that’s it! Now you can search over all your AWS CodeCommit repositories at once or configure a search group that lets you and your team search over a targeted subset of repositories. You can also configure Sourcegraph to work with a variety of Enterprise SSO identity providers and additional code hosts. You can read more about customizations <a href=\"https://docs.sourcegraph.com/admin\">in the Sourcegraph administrator docs</a>.</p>\n<p><a href=\"https://docs.sourcegraph.com/#quickstart\">Install a self-hosted Sourcegraph instance with 1 command.</a></p>"}