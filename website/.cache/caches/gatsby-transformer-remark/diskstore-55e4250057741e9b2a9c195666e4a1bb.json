{"expireTime":9007200905229170000,"key":"transformer-remark-markdown-ast-e9b434749e76c7c01d7427a05120f5a5-gatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-unwrap-imagesgatsby-remark-imagesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"In this post, we’ll explain how Sourcegraph code search can be used to report on the progress of upgrading CircleCI config files to the 2.0 format.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":148,"offset":148},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":148,"offset":148},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"CircleCI 2.0 officially came out of beta in July 2017, introducing a versioned config file (","position":{"start":{"line":4,"column":1,"offset":150},"end":{"line":4,"column":93,"offset":242},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.circleci/config.yml</code>","position":{"start":{"line":4,"column":93,"offset":242},"end":{"line":4,"column":115,"offset":264},"indent":[]}},{"type":"text","value":") to replace the previous ","position":{"start":{"line":4,"column":115,"offset":264},"end":{"line":4,"column":141,"offset":290},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">circle.yml</code>","position":{"start":{"line":4,"column":141,"offset":290},"end":{"line":4,"column":153,"offset":302},"indent":[]}},{"type":"text","value":" file. A likely scenario could be an Engineering Manager requesting all teams upgrade to CircleCI 2.0 and wanting to track progress without human intervention.","position":{"start":{"line":4,"column":153,"offset":302},"end":{"line":4,"column":312,"offset":461},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":150},"end":{"line":4,"column":312,"offset":461},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Using ","position":{"start":{"line":6,"column":1,"offset":463},"end":{"line":6,"column":7,"offset":469},"indent":[]}},{"type":"link","title":null,"url":"https://sourcegraph.com/","children":[{"type":"text","value":"Sourcegraph.com","position":{"start":{"line":6,"column":8,"offset":470},"end":{"line":6,"column":23,"offset":485},"indent":[]}}],"position":{"start":{"line":6,"column":7,"offset":469},"end":{"line":6,"column":50,"offset":512},"indent":[]}},{"type":"text","value":" and as an example, ","position":{"start":{"line":6,"column":50,"offset":512},"end":{"line":6,"column":70,"offset":532},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/segmentio","children":[{"type":"text","value":"Segment’s open source code on GitHub","position":{"start":{"line":6,"column":71,"offset":533},"end":{"line":6,"column":107,"offset":569},"indent":[]}}],"position":{"start":{"line":6,"column":70,"offset":532},"end":{"line":6,"column":138,"offset":600},"indent":[]}},{"type":"text","value":", let’s search for repositories that contain the 1.0 ","position":{"start":{"line":6,"column":138,"offset":600},"end":{"line":6,"column":191,"offset":653},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">circle.yml</code>","position":{"start":{"line":6,"column":191,"offset":653},"end":{"line":6,"column":203,"offset":665},"indent":[]}},{"type":"text","value":" file:","position":{"start":{"line":6,"column":203,"offset":665},"end":{"line":6,"column":209,"offset":671},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":463},"end":{"line":6,"column":209,"offset":671},"indent":[]}},{"type":"html","value":"<div class=\"text-center\" style=\"margin-bottom: -1rem\">","position":{"start":{"line":8,"column":1,"offset":673},"end":{"line":8,"column":55,"offset":727},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"  Query: ","position":{"start":{"line":10,"column":1,"offset":729},"end":{"line":10,"column":10,"offset":738},"indent":[]}},{"type":"link","title":null,"url":"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml","children":[{"type":"html","value":"<code class=\"language-text\">repo:/segmentio/ file:circle.yml</code>","position":{"start":{"line":10,"column":11,"offset":739},"end":{"line":10,"column":45,"offset":773},"indent":[]}}],"position":{"start":{"line":10,"column":10,"offset":738},"end":{"line":10,"column":113,"offset":841},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":10,"column":113,"offset":841},"end":{"line":10,"column":114,"offset":842},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":729},"end":{"line":10,"column":114,"offset":842},"indent":[]}},{"type":"html","value":"</div>","position":{"start":{"line":12,"column":1,"offset":844},"end":{"line":12,"column":7,"offset":850},"indent":[]}},{"type":"html","value":"<a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n  <img src=\"https://about.sourcegraph.com/blog/circleci-results.png\" alt=\"CircleCi results\">\n</a>","position":{"start":{"line":14,"column":1,"offset":852},"end":{"line":16,"column":5,"offset":1028},"indent":[1,1]}},{"type":"html","value":"<p style=\"margin-top:2rem\">\n  Typing this query every time would be inefficient, so let's save this query as a saved search.\n  <img src=\"https://about.sourcegraph.com/blog/circleci-create-saved-search.png\" alt=\"CicleCi create saved search\">\n</p>","position":{"start":{"line":18,"column":1,"offset":1030},"end":{"line":21,"column":5,"offset":1276},"indent":[1,1,1]}},{"type":"html","value":"<p style=\"margin-top:2rem\">\n  Then we can access it with a single click.\n  <img src=\"https://about.sourcegraph.com/blog/circleci-access-saved-search.png\" alt=\"CicleCi access saved search\">\n</p>","position":{"start":{"line":23,"column":1,"offset":1278},"end":{"line":26,"column":5,"offset":1472},"indent":[1,1,1]}},{"type":"html","value":"<!--\nTODO(ryan): Needs type:diff <p style=\"margin-top:2rem\">\n  We can take this a step further by opting to receive a notification when the number of results for <code>circle.yml</code> files change:\n  <img src=\"https://about.sourcegraph.com//blog/circleci-saved-search-notification.png\" />\n</p> -->","position":{"start":{"line":28,"column":1,"offset":1474},"end":{"line":32,"column":9,"offset":1773},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#Bonus-queries","title":null,"children":[],"data":{"hProperties":{"aria-label":"Bonus queries permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 18 95 120\" height=\"18\" width=\"18\"><path d=\"M53.69,78.7H37.94l-5.85,25H21.74l5.85-25H15.89L18,69.1H29.84l4.65-19.65H23.39l2.1-9.6H36.74l5.7-23.7H52.79l-5.7,23.7H62.84l5.7-23.7H78.89l-5.7,23.7H84.74l-2.4,9.6H70.94L66.29,69.1H77.24l-2.4,9.6H64l-5.85,25H47.84Zm-13.5-9.6H55.94l4.65-19.65H44.84Z\"/></svg>"}]}},{"type":"text","value":"Bonus queries","position":{"start":{"line":34,"column":4,"offset":1778},"end":{"line":34,"column":17,"offset":1791},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1775},"end":{"line":34,"column":17,"offset":1791},"indent":[]},"data":{"id":"Bonus-queries","htmlAttributes":{"id":"Bonus-queries"},"hProperties":{"id":"Bonus-queries","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"If we wanted to find which repositories ","position":{"start":{"line":36,"column":1,"offset":1793},"end":{"line":36,"column":41,"offset":1833},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"have","position":{"start":{"line":36,"column":43,"offset":1835},"end":{"line":36,"column":47,"offset":1839},"indent":[]}}],"position":{"start":{"line":36,"column":41,"offset":1833},"end":{"line":36,"column":49,"offset":1841},"indent":[]}},{"type":"text","value":" been upgraded.","position":{"start":{"line":36,"column":49,"offset":1841},"end":{"line":36,"column":64,"offset":1856},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1793},"end":{"line":36,"column":64,"offset":1856},"indent":[]}},{"type":"html","value":"<div class=\"text-center\" style=\"margin-bottom: -1rem\">","position":{"start":{"line":38,"column":1,"offset":1858},"end":{"line":38,"column":55,"offset":1912},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Query: ","position":{"start":{"line":40,"column":1,"offset":1914},"end":{"line":40,"column":8,"offset":1921},"indent":[]}},{"type":"link","title":null,"url":"https://sourcegraph.com/search?q=repo:/segmentio/+file:%5C.circleci/config%5C.yml","children":[{"type":"html","value":"<code class=\"language-text\">repo:/segmentio/ file:\\.circleci/config\\.yml</code>","position":{"start":{"line":40,"column":9,"offset":1922},"end":{"line":40,"column":55,"offset":1968},"indent":[]}}],"position":{"start":{"line":40,"column":8,"offset":1921},"end":{"line":40,"column":139,"offset":2052},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":40,"column":139,"offset":2052},"end":{"line":40,"column":140,"offset":2053},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1914},"end":{"line":40,"column":140,"offset":2053},"indent":[]}},{"type":"html","value":"</div>","position":{"start":{"line":42,"column":1,"offset":2055},"end":{"line":42,"column":7,"offset":2061},"indent":[]}},{"type":"html","value":"<div class=\"text-center\">\n  <a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n    <img src=\"https://about.sourcegraph.com/blog/circleci-results.png\" alt=\"CircleCi results\">\n  </a>\n</div>","position":{"start":{"line":44,"column":1,"offset":2063},"end":{"line":48,"column":7,"offset":2277},"indent":[1,1,1,1]}},{"type":"html","value":"<p style=\"margin-top:2rem\">\n  Using Sourcegraph's diff search (<code>type: diff</code>), we can find who made the commit that contained the upgrade.\n</p>","position":{"start":{"line":50,"column":1,"offset":2279},"end":{"line":52,"column":5,"offset":2432},"indent":[1,1]}},{"type":"html","value":"<div class=\"text-center\" style=\"margin-bottom: -1rem\">","position":{"start":{"line":54,"column":1,"offset":2434},"end":{"line":54,"column":55,"offset":2488},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"  Query: ","position":{"start":{"line":56,"column":1,"offset":2490},"end":{"line":56,"column":10,"offset":2499},"indent":[]}},{"type":"link","title":null,"url":"https://sourcegraph.com/search?q=repo:/segmentio/+file:%5C.circleci/config%5C.yml+type:diff+%22version:+2%22","children":[{"type":"html","value":"<code class=\"language-text\">repo:/segmentio/ file:\\.circleci/config\\.yml type:diff &quot;version: 2&quot;</code>","position":{"start":{"line":56,"column":11,"offset":2500},"end":{"line":56,"column":80,"offset":2569},"indent":[]}}],"position":{"start":{"line":56,"column":10,"offset":2499},"end":{"line":56,"column":191,"offset":2680},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":56,"column":191,"offset":2680},"end":{"line":56,"column":192,"offset":2681},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2490},"end":{"line":56,"column":192,"offset":2681},"indent":[]}},{"type":"html","value":"</div>","position":{"start":{"line":58,"column":1,"offset":2683},"end":{"line":58,"column":7,"offset":2689},"indent":[]}},{"type":"html","value":"<a href=\"https://sourcegraph.com/search?q=repo:/segmentio/+file:circle.yml\">\n  <img src=\"https://about.sourcegraph.com/blog/circleci-who-upgraded.png\" alt=\"CicleCi who upgraded\">\n</a>","position":{"start":{"line":60,"column":1,"offset":2691},"end":{"line":62,"column":5,"offset":2876},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#Find-answers-in-code-with-Sourcegraph","title":null,"children":[],"data":{"hProperties":{"aria-label":"Find answers in code with Sourcegraph permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 18 95 120\" height=\"18\" width=\"18\"><path d=\"M53.69,78.7H37.94l-5.85,25H21.74l5.85-25H15.89L18,69.1H29.84l4.65-19.65H23.39l2.1-9.6H36.74l5.7-23.7H52.79l-5.7,23.7H62.84l5.7-23.7H78.89l-5.7,23.7H84.74l-2.4,9.6H70.94L66.29,69.1H77.24l-2.4,9.6H64l-5.85,25H47.84Zm-13.5-9.6H55.94l4.65-19.65H44.84Z\"/></svg>"}]}},{"type":"text","value":"Find answers in code with Sourcegraph","position":{"start":{"line":64,"column":4,"offset":2881},"end":{"line":64,"column":41,"offset":2918},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2878},"end":{"line":64,"column":41,"offset":2918},"indent":[]},"data":{"id":"Find-answers-in-code-with-Sourcegraph","htmlAttributes":{"id":"Find-answers-in-code-with-Sourcegraph"},"hProperties":{"id":"Find-answers-in-code-with-Sourcegraph","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Sourcegraph helps you find answers in code, supporting 10,000+ repositories and thousands of developers.","position":{"start":{"line":66,"column":1,"offset":2920},"end":{"line":66,"column":105,"offset":3024},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2920},"end":{"line":66,"column":105,"offset":3024},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Although this example was specific to CircleCI config files, the concepts apply equally well for many other similar use cases, such as tracking the removal of a deprecated Node.js package.","position":{"start":{"line":68,"column":1,"offset":3026},"end":{"line":68,"column":189,"offset":3214},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3026},"end":{"line":68,"column":189,"offset":3214},"indent":[]}},{"type":"html","value":"<style>\n  .blog-post__body img { border: none; }\n  .blog-post__body code { font-size: 0.9rem; }\n</style>","position":{"start":{"line":70,"column":1,"offset":3216},"end":{"line":73,"column":9,"offset":3320},"indent":[1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":74,"column":1,"offset":3321}}}}